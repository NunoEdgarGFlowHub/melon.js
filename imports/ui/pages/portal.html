<template name="portal">
  <script type="text/javascript" async src="https://platform.twitter.com/widgets.js"></script>

  <!-- Index-banner -->
  <div class="section blue-grey darken-2 white-text" id="index-banner">
    <div class="container">
      <div class="row center">
        <div class="col s12 m8">
          <!-- Client is connected -->
          {{#if isClientConnected}}
            {{#if clientDefaultAccount}}
              {{#if isRopstenNetwork}}
                {{#if getPortfolioCountOfDefaultAccount}}
                  <h2 class="header center-on-small-only grey-text text-lighten-4">Portal</h2>
                  <h4 class ="center-on-small-only light grey-text text-lighten-5">Explore the future of finance with Melon</h4>
                {{else}}
                  <h2 class="header center-on-small-only grey-text text-lighten-4">You are good to go!</h2>
                  <h4 class ="center-on-small-only light grey-text text-lighten-5">Explore the future of finance with Melon</h4>
                {{/if}}
              {{else}}
                <h2 class ="center-on-small-only light grey-text text-lighten-5">Great you're connected!</h2>
                <h4 class ="center-on-small-only light grey-text text-lighten-5">Now switch to the <a class="blue-text text-lighten-2">Ethereum testnet</a> to use this application</h4>
              {{/if}}
            {{else}}
              <h2 class ="center-on-small-only light grey-text text-lighten-5">Great you're connected!</h2>
              <h4 class ="center-on-small-only light grey-text text-lighten-5">Now select an <a class="blue-text text-lighten-2">Ethereum account</a> to use this application</h4>
            {{/if}}
          {{else}}
            <h4 class ="center-on-small-only light grey-text text-lighten-5">Start by installing <a class="white-text" href="https://metamask.io/" target="_blank"><b>MetaMask</b></a> or <a class="white-text" href="https://github.com/ethereum/mist/releases/tag/v0.8.8" target="_blank"><b>Mist</b></a></h4>
          {{/if}}
        </div>
        <!-- Client is connected -->
        {{#if isClientConnected}}
          <div class="col s12 m2">
            {{> network_summary}}
          </div>
          <div class="col s12 m2">
            {{> executive_summary}}
          </div>
        {{else}}
          <div class="col s12 m4">
            <span class="text-light">Try to use me with</span>
            <li><a class="white-text" href="https://metamask.io/" target="_blank"><b>MetaMask</b></a></li>
            <li><a class="white-text" href="https://github.com/ethereum/mist/releases/tag/v0.8.8" target="_blank"><b>Mist</b></a></li>
          </div>
        {{/if}}
      </div>
    </div>
  </div>

  {{#if isServerConnected}}
    <!-- Outer row -->
    <div class="container">
      <div class="row">
        <div class="col s12">
          {{#if isClientConnected}}
            {{#if clientDefaultAccount}}
              {{#if isRopstenNetwork}}
                {{#if getPortfolioCountOfDefaultAccount}}
                  {{> welcome_list}}
                {{else}}
                  {{> portfolio_new}}
                {{/if}}
              {{/if}}
            {{/if}}
          {{else}}
            {{> welcome_list}}
          {{/if}}
        </div>
      </div>
    </div>

  {{else}}
    <!-- Not connected to the node -->
    <div class="container">
      <div class="row">
        <div class="col s12 m9 offset-m1 l8 offset-l2">
          <div id="results" class="section scrollspy">
            <h4 class="light">Ethereum node down</h4>
            <p>Unfortunately the server-side Ethereum node seems to be down. <a href="mailto:team@melonport.com?subject=Server Side Ethereum Node Down on Portal app" target="_top">Please contact us</a>. Thanks.</p>
          </div>
        </div>
      </div>
    </div>
  {{/if}}
</template>
